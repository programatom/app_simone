<ion-header>
  <ion-toolbar>
    <ion-title>Entregas en peligro</ion-title>
    <ion-buttons slot="start">
        <ion-button (click)="dismiss()">
            <ion-icon name="arrow-back" style="font-size:7vw">
            </ion-icon>
        </ion-button>
    </ion-buttons>
  </ion-toolbar>
  <ion-searchbar placeholder="Filtrar" (ionChange)="filtrarEntregas($event)"></ion-searchbar>
</ion-header>

<ion-content>

  <ion-list>
    <div *ngFor="let pedido of pedidosDisplay; let index_pedido = index">
      <ion-item-sliding *ngFor="let entrega of pedido.entregas; let index_entrega = index">

        <ion-item>
          <ion-row>
            <ion-col size="12">
              <strong>
                Entrega NÂº: {{entrega.id}}
              </strong>
            </ion-col>
            <ion-col size="12">
              <strong>
                Nombre:
              </strong>
            </ion-col>
            <ion-col size="6">
              {{pedido.usuario.name}}
            </ion-col>
            <ion-col size="6" text-center>
              <ion-button (click)="verInfo(pedido, index_entrega)">
                Ver info
              </ion-button>
            </ion-col>
            <ion-col size="12">
              <strong>
                Localidad:
              </strong>
            </ion-col>
            <ion-col size="12">
              {{pedido.rol.localidad}}
            </ion-col>
            <ion-col size="12">
              <strong>
                Fecha de entrega perdida:
              </strong>
            </ion-col>
            <ion-col size="12">
              {{entrega.fecha_de_entrega_potencial}}
            </ion-col>
          </ion-row>
        </ion-item>

        <ion-item-options side="end">
          <ion-item-option color="secondary" (click)="modificar(pedido, index_pedido, index_entrega)">Modificar</ion-item-option>
          <ion-item-option color="success" (click)="entregarSinModificaciones(pedido , index_pedido, index_entrega)">Entregar</ion-item-option>
        </ion-item-options>
      </ion-item-sliding>
    </div>
  </ion-list>

</ion-content>
